{% extends 'base.html' %}
{% block content %}
<h1>Dashboard</h1>

<section class="cards">
  <div class="card">
    <h3>This Month Total</h3>
    <div class="big">₹ {{ '%.2f'|format(summary.total) }}</div>
  </div>
  <div class="card">
    <h3>Next Month (Predicted)</h3>
    <div class="big">₹ {{ '%.2f'|format(forecast.total_next_month) }}</div>
  </div>
  <div class="card">
    <h3>Top Categories</h3>
    <ul>
    {% for k,v in summary.by_category.items()|list|sort(attribute=1, reverse=True) %}
      <li>{{ k }} — ₹ {{ '%.2f'|format(v) }}</li>
    {% else %}
      <li>No data yet</li>
    {% endfor %}
    </ul>
  </div>
  <div class="card">
    <h3>Predicted (Per Category)</h3>
    <ul>
    {% for k,v in forecast.per_category_next_month.items() %}
      <li>{{ k }} — ₹ {{ '%.2f'|format(v) }}</li>
    {% else %}
      <li>Not enough data</li>
    {% endfor %}
    </ul>
  </div>
</section>

<section>
  <h2>Recent</h2>
  <table class="table">
    <thead><tr><th>Date</th><th>Amount</th><th>Category</th><th>Description</th></tr></thead>
    <tbody>
      {% for e in expenses %}
      <tr>
        <td>{{ e.date }}</td>
        <td>₹ {{ '%.2f'|format(e.amount) }}</td>
        <td>{{ e.category }}</td>
        <td>{{ e.description }}</td>
      </tr>
      {% else %}
      <tr><td colspan="4">No expenses yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</section>
{% endblock %}



