{% extends 'base.html' %}
{% block content %}
<h1>ğŸ“Š Dashboard</h1>

<section class="cards">
  <div class="card">
    <h3>ğŸ’° This Month Total</h3>
    <div class="big">â‚¹{{ '%.2f'|format(summary.total) }}</div>
  </div>
  <div class="card">
    <h3>ğŸ”® Next Month (Predicted)</h3>
    <div class="big">â‚¹{{ '%.2f'|format(forecast.total_next_month) }}</div>
  </div>
  <div class="card">
    <h3>ğŸ“ˆ Top Categories</h3>
    <ul>
    {% for k,v in summary.by_category.items()|list|sort(attribute=1, reverse=True) %}
      <li>{{ k }} â€” <span class="amount">â‚¹{{ '%.2f'|format(v) }}</span></li>
    {% else %}
      <li class="muted">No data yet</li>
    {% endfor %}
    </ul>
  </div>
  <div class="card">
    <h3>ğŸ¯ Predicted (Per Category)</h3>
    <ul>
    {% for k,v in forecast.per_category_next_month.items() %}
      <li>{{ k }} â€” <span class="amount">â‚¹{{ '%.2f'|format(v) }}</span></li>
    {% else %}
      <li class="muted">Not enough data</li>
    {% endfor %}
    </ul>
  </div>
</section>

<section>
  <h2>ğŸ“ Recent Expenses</h2>
  <table class="table">
    <thead>
      <tr>
        <th>Date</th>
        <th>Amount</th>
        <th>Category</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      {% for e in expenses %}
      <tr>
        <td>{{ e.date }}</td>
        <td><span class="amount">â‚¹{{ '%.2f'|format(e.amount) }}</span></td>
        <td><span class="category-badge">{{ e.category }}</span></td>
        <td>{{ e.description }}</td>
      </tr>
      {% else %}
      <tr><td colspan="4" class="muted" style="text-align: center; padding: 32px;">No expenses yet. <a href="{{ url_for('add') }}" style="color: var(--accent-2);">Add one!</a></td></tr>
      {% endfor %}
    </tbody>
  </table>
</section>
{% endblock %}



