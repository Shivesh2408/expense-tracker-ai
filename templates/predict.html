{% extends 'base.html' %}
{% block content %}
<h1>ðŸ”® Predict Next Month</h1>

<form method="get" class="form-inline">
  <label>Months to analyze
    <input type="number" name="months" min="2" max="24" value="{{ months }}" style="width: 100px;" />
  </label>
  <button type="submit">ðŸ”® Predict</button>
</form>

<div class="card">
  <h3>ðŸ’° Total (Predicted)</h3>
  <div class="big">â‚¹{{ '%.2f'|format(forecast.total_next_month) }}</div>
  <div class="muted" style="margin-top: 8px; font-size: 0.9rem;">
    Based on last {{ months }} month(s) of data
  </div>
</div>

{% if forecast.per_category_next_month %}
<h3>ðŸ“ˆ Per Category (Predicted)</h3>
<div class="cards" style="margin-top: 20px;">
  {% for k,v in forecast.per_category_next_month.items()|list|sort(attribute=1, reverse=True) %}
  <div class="card">
    <h3>{{ k }}</h3>
    <div class="big">â‚¹{{ '%.2f'|format(v) }}</div>
    {% if forecast.total_next_month > 0 %}
    <div class="muted" style="margin-top: 8px; font-size: 0.9rem;">
      {{ '%.1f'|format((v / forecast.total_next_month * 100)) }}% of predicted total
    </div>
    {% endif %}
  </div>
  {% endfor %}
</div>
{% else %}
<div class="card">
  <p class="muted">Not enough historical data for category breakdown.</p>
</div>
{% endif %}
{% endblock %}





