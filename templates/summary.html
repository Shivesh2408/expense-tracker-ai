{% extends 'base.html' %}
{% block content %}
<h1>ðŸ“Š Summary</h1>

<form method="get" class="form-inline">
  <label>Period
    <select name="period" onchange="this.form.submit()">
      <option value="day" {% if period=='day' %}selected{% endif %}>Today</option>
      <option value="week" {% if period=='week' %}selected{% endif %}>This Week</option>
      <option value="month" {% if period=='month' %}selected{% endif %}>This Month</option>
      <option value="all" {% if period=='all' %}selected{% endif %}>All Time</option>
    </select>
  </label>
</form>

<div class="card">
  <h3>ðŸ’° Total</h3>
  <div class="big">â‚¹{{ '%.2f'|format(summary.total) }}</div>
</div>

{% if summary.by_category %}
<h3>ðŸ“ˆ By Category</h3>
<div class="cards" style="margin-top: 20px;">
  {% for k,v in (summary.by_category.items()|list)|sort(attribute=1, reverse=True) %}
  <div class="card">
    <h3>{{ k }}</h3>
    <div class="big">â‚¹{{ '%.2f'|format(v) }}</div>
    {% if summary.total > 0 %}
    <div class="muted" style="margin-top: 8px; font-size: 0.9rem;">
      {{ '%.1f'|format((v / summary.total * 100)) }}% of total
    </div>
    {% endif %}
  </div>
  {% endfor %}
</div>
{% else %}
<div class="card">
  <p class="muted">No data available for this period.</p>
</div>
{% endif %}
{% endblock %}





